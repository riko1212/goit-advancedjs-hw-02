{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\r\nimport iziToast from 'izitoast';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nlet selectedDate = null;\r\n\r\niziToast.settings({\r\n  position: 'topRight',\r\n  timeout: 3000,\r\n});\r\n\r\nconst setElementState = (element, isEnabled) => {\r\n  element.toggleAttribute('disabled', !isEnabled);\r\n};\r\n\r\nconst handleDateSelection = (dates, triggerButton) => {\r\n  if (dates[0] < new Date()) {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Please choose a date in the future',\r\n    });\r\n    setElementState(triggerButton, false);\r\n  } else {\r\n    selectedDate = dates[0];\r\n    setElementState(triggerButton, true);\r\n  }\r\n};\r\n\r\nconst formatWithLeadingZero = (num) => String(num).padStart(2, '0');\r\n\r\nconst calculateTimeUnits = (milliseconds) => {\r\n  const timeUnits = {\r\n    day: 86400000,\r\n    hour: 3600000,\r\n    minute: 60000,\r\n    second: 1000,\r\n  };\r\n  return {\r\n    days: formatWithLeadingZero(Math.floor(milliseconds / timeUnits.day)),\r\n    hours: formatWithLeadingZero(\r\n      Math.floor((milliseconds % timeUnits.day) / timeUnits.hour)\r\n    ),\r\n    minutes: formatWithLeadingZero(\r\n      Math.floor((milliseconds % timeUnits.hour) / timeUnits.minute)\r\n    ),\r\n    seconds: formatWithLeadingZero(\r\n      Math.floor((milliseconds % timeUnits.minute) / timeUnits.second)\r\n    ),\r\n  };\r\n};\r\n\r\nconst refreshTimerDisplay = (timerElements, timeData) => {\r\n  Object.keys(timeData).forEach((unit) => {\r\n    timerElements[unit].textContent = timeData[unit];\r\n  });\r\n};\r\n\r\nconst initiateCountdown = (timerElements, inputField) => {\r\n  const countdownInterval = setInterval(() => {\r\n    const remainingTime = selectedDate - new Date();\r\n    refreshTimerDisplay(timerElements, calculateTimeUnits(remainingTime));\r\n    if (remainingTime < 1000) {\r\n      clearInterval(countdownInterval);\r\n      setElementState(inputField, true);\r\n    }\r\n  }, 1000);\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const startButton = document.querySelector('button[data-start]');\r\n  const dateInput = document.querySelector('#datetime-picker');\r\n  const timerElements = ['days', 'hours', 'minutes', 'seconds'].reduce(\r\n    (elements, unit) => {\r\n      elements[unit] = document.querySelector(`[data-${unit}]`);\r\n      return elements;\r\n    },\r\n    {}\r\n  );\r\n\r\n  setElementState(startButton, false);\r\n  flatpickr(dateInput, {\r\n    enableTime: true,\r\n    time_24hr: true,\r\n    defaultDate: new Date(),\r\n    minuteIncrement: 1,\r\n    onClose: (dates) => handleDateSelection(dates, startButton),\r\n  });\r\n\r\n  startButton.addEventListener('click', () => {\r\n    initiateCountdown(timerElements, dateInput);\r\n    setElementState(startButton, false);\r\n    setElementState(dateInput, false);\r\n  });\r\n});\r\n"],"names":["selectedDate","iziToast","setElementState","element","isEnabled","handleDateSelection","dates","triggerButton","formatWithLeadingZero","num","calculateTimeUnits","milliseconds","timeUnits","refreshTimerDisplay","timerElements","timeData","unit","initiateCountdown","inputField","countdownInterval","remainingTime","startButton","dateInput","elements","flatpickr"],"mappings":"0IAKA,IAAIA,EAAe,KAEnBC,EAAS,SAAS,CAChB,SAAU,WACV,QAAS,GACX,CAAC,EAED,MAAMC,EAAkB,CAACC,EAASC,IAAc,CAC9CD,EAAQ,gBAAgB,WAAY,CAACC,CAAS,CAChD,EAEMC,EAAsB,CAACC,EAAOC,IAAkB,CAChDD,EAAM,CAAC,EAAI,IAAI,MACjBL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,EACDC,EAAgBK,EAAe,EAAK,IAEpCP,EAAeM,EAAM,CAAC,EACtBJ,EAAgBK,EAAe,EAAI,EAEvC,EAEMC,EAAyBC,GAAQ,OAAOA,CAAG,EAAE,SAAS,EAAG,GAAG,EAE5DC,EAAsBC,GAAiB,CAC3C,MAAMC,EAAY,CAChB,IAAK,MACL,KAAM,KACN,OAAQ,IACR,OAAQ,GACZ,EACE,MAAO,CACL,KAAMJ,EAAsB,KAAK,MAAMG,EAAeC,EAAU,GAAG,CAAC,EACpE,MAAOJ,EACL,KAAK,MAAOG,EAAeC,EAAU,IAAOA,EAAU,IAAI,CAC3D,EACD,QAASJ,EACP,KAAK,MAAOG,EAAeC,EAAU,KAAQA,EAAU,MAAM,CAC9D,EACD,QAASJ,EACP,KAAK,MAAOG,EAAeC,EAAU,OAAUA,EAAU,MAAM,CAChE,CACL,CACA,EAEMC,EAAsB,CAACC,EAAeC,IAAa,CACvD,OAAO,KAAKA,CAAQ,EAAE,QAASC,GAAS,CACtCF,EAAcE,CAAI,EAAE,YAAcD,EAASC,CAAI,CACnD,CAAG,CACH,EAEMC,EAAoB,CAACH,EAAeI,IAAe,CACvD,MAAMC,EAAoB,YAAY,IAAM,CAC1C,MAAMC,EAAgBpB,EAAe,IAAI,KACzCa,EAAoBC,EAAeJ,EAAmBU,CAAa,CAAC,EAChEA,EAAgB,MAClB,cAAcD,CAAiB,EAC/BjB,EAAgBgB,EAAY,EAAI,EAEnC,EAAE,GAAI,CACT,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMG,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAY,SAAS,cAAc,kBAAkB,EACrDR,EAAgB,CAAC,OAAQ,QAAS,UAAW,SAAS,EAAE,OAC5D,CAACS,EAAUP,KACTO,EAASP,CAAI,EAAI,SAAS,cAAc,SAASA,CAAI,GAAG,EACjDO,GAET,CAAE,CACN,EAEErB,EAAgBmB,EAAa,EAAK,EAClCG,EAAUF,EAAW,CACnB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAUhB,GAAUD,EAAoBC,EAAOe,CAAW,CAC9D,CAAG,EAEDA,EAAY,iBAAiB,QAAS,IAAM,CAC1CJ,EAAkBH,EAAeQ,CAAS,EAC1CpB,EAAgBmB,EAAa,EAAK,EAClCnB,EAAgBoB,EAAW,EAAK,CACpC,CAAG,CACH,CAAC"}